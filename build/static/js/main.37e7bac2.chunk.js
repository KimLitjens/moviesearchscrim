(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{20:function(e,t,c){},37:function(e,t,c){"use strict";c.r(t);var n=c(2),r=c.n(n),a=c(9),i=c.n(a),l=(c(20),c(6)),j=c(7),s=c.n(j),o=c(11),b=c(4),d=c(1),u=c(3),O=c(0);function h(e){var t=e.children,c=Object(u.a)(e,["children"]);return Object(O.jsx)("div",Object(d.a)(Object(d.a)({},c),{},{children:t}))}function m(e){var t=e.children,c=Object(u.a)(e,["children"]);return Object(O.jsx)("div",Object(d.a)(Object(d.a)({},c),{},{className:"mb-5 text-secondary",children:t}))}function x(e){var t=e.children,c=Object(u.a)(e,["children"]);return Object(O.jsx)("div",Object(d.a)(Object(d.a)({},c),{},{className:"flex",children:t}))}h.Title=function(e){var t=e.children,c=Object(u.a)(e,["children"]);return Object(O.jsx)("h1",Object(d.a)(Object(d.a)({},c),{},{className:"text-center text-7xl mb-4",children:t}))},m.Form=function(e){var t=e.children,c=Object(u.a)(e,["children"]);return Object(O.jsx)("form",Object(d.a)(Object(d.a)({},c),{},{className:"mb-5",children:t}))},m.Button=function(e){var t=e.children,c=Object(u.a)(e,["children"]);return Object(O.jsx)("button",Object(d.a)(Object(d.a)({},c),{},{className:"hover:opacity-75 bg-primary text-2xl px-8 py-4 ml-2 rounded-full",children:t}))},m.Input=function(e){var t=e.children,c=Object(u.a)(e,["children"]);return Object(O.jsx)("input",Object(d.a)(Object(d.a)({},c),{},{className:"text-2xl leading-10 border rounded-3xl mb-4 px-8 py-2 mr-2.5 w-5/6",children:t}))},x.Label=function(e){var t=e.children,c=Object(u.a)(e,["children"]);return Object(O.jsx)("h1",Object(d.a)(Object(d.a)({},c),{},{className:"text-4xl uppercase mb-1 mr-1",children:t}))},x.Form=function(e){var t=e.children,c=Object(u.a)(e,["children"]);return Object(O.jsx)("form",Object(d.a)(Object(d.a)({},c),{},{className:"flex",children:t}))},x.Select=function(e){var t=e.children,c=Object(u.a)(e,["children"]);return Object(O.jsx)("select",Object(d.a)(Object(d.a)({},c),{},{className:"text-2xl text-secondary leading-10 border rounded-3xl mb-4 px-8 py-2 mr-2.5",children:t}))};var f=c(13);function v(e){var t=e.children,c=Object(u.a)(e,["children"]);return Object(O.jsx)("div",Object(d.a)(Object(d.a)({},c),{},{className:"flex flex-col px-16 py-8 rounded-xl shadow-2xl mb-8 mr-8 bg-grey text-primary",children:t}))}function p(e){var t=e.children,c=Object(u.a)(e,["children"]);return Object(O.jsx)("div",Object(d.a)(Object(d.a)({},c),{},{className:"grid grid-flow-rows md:grid-cols-3 grid-rows-3 gap-4 mt-16",children:t}))}function y(){return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(h.Title,{children:"My Movie Search"})})}function g(e){var t=e.movie,c="tv"===t.media_type?"tv":"movie",r=Object(n.useState)([]),a=Object(b.a)(r,2),l=a[0],j=a[1],s=Object(n.useState)(!1),o=Object(b.a)(s,2),d=o[0],u=o[1];Object(n.useEffect)((function(){fetch("https://api.themoviedb.org/3/".concat(c,"/").concat(t.id,"/videos?api_key=").concat("","&language=en-US")).then((function(e){return e.json()})).then((function(e){return e.results.find((function(e){return"Trailer"===e.type}))})).then((function(e){j(e)}))}),[]);return Object(O.jsxs)(v,{children:[Object(O.jsx)(v.Link,{href:"https://www.themoviedb.org/".concat(c,"/").concat(t.id),target:"_blank",children:Object(O.jsx)(v.Image,{src:"https://image.tmdb.org/t/p/w185_and_h278_bestv2/".concat(t.poster_path),alt:t.title+" poster"})}),Object(O.jsx)(v.Title,{children:t.title||t.name}),Object(O.jsx)(v.ReleaseDate,{children:Object(O.jsxs)("small",{children:["RELEASE DATE: ",t.release_date||t.first_air_date]})}),Object(O.jsx)(v.Rating,{children:Object(O.jsxs)("small",{children:["RATING: ",t.vote_average]})}),Object(O.jsx)(v.Overview,{children:t.overview}),l?Object(O.jsx)(v.Trailer,{onClick:function(){return u(!0)},children:"Trailer"}):null,d?i.a.createPortal(Object(O.jsx)(v.Overlay,{onClick:function(){return u(!1)},children:Object(O.jsx)(v.Container,{children:Object(O.jsx)(v.Youtube,{videoId:l.key,opts:{height:"390",width:"640",playerVars:{autoplay:1}}})})}),document.body):null]})}v.Title=function(e){var t=e.children,c=Object(u.a)(e,["children"]);return Object(O.jsx)("h3",Object(d.a)(Object(d.a)({},c),{},{className:"my-4 text-5xl text-white text-center",children:t}))},v.Image=function(e){e.children;var t=Object(u.a)(e,["children"]);return Object(O.jsx)("img",Object(d.a)(Object(d.a)({},t),{},{className:"mx-auto my-0"}))},v.Link=function(e){var t=e.children,c=Object(u.a)(e,["children"]);return Object(O.jsx)("a",Object(d.a)(Object(d.a)({},c),{},{children:t}))},v.ReleaseDate=function(e){var t=e.children,c=Object(u.a)(e,["children"]);return Object(O.jsx)("p",Object(d.a)(Object(d.a)({},c),{},{className:" text-center",children:t}))},v.Rating=function(e){var t=e.children,c=Object(u.a)(e,["children"]);return Object(O.jsx)("p",Object(d.a)(Object(d.a)({},c),{},{className:" text-center",children:t}))},v.Overview=function(e){var t=e.children,c=Object(u.a)(e,["children"]);return Object(O.jsx)("p",Object(d.a)(Object(d.a)({},c),{},{className:"text-white text-center my-8",children:t}))},v.Trailer=function(e){var t=e.children,c=Object(u.a)(e,["children"]);return Object(O.jsx)("button",Object(d.a)(Object(d.a)({},c),{},{className:" bg-primary text-white mt-20 rounded-full px-16 py-4 text-3xl ",children:t}))},v.Overlay=function(e){var t=e.children,c=Object(u.a)(e,["children"]);return Object(O.jsx)("div",Object(d.a)(Object(d.a)({},c),{},{className:"fixed inset-0 bg-secondary bg-opacity-80 z-50 h-screen",children:t}))},v.Youtube=function(e){e.children;var t=Object(u.a)(e,["children"]);return Object(O.jsx)(f.a,Object(d.a)(Object(d.a)({},t),{},{className:" m-auto z-50"}))},v.Container=function(e){var t=e.children,c=Object(u.a)(e,["children"]);return Object(O.jsx)("container",Object(d.a)(Object(d.a)({},c),{},{className:"flex h-screen justify-center items-center",children:t}))};var w=[{id:10759,name:"Action & Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:10762,name:"Kids"},{id:9648,name:"Mystery"},{id:10763,name:"News"},{id:10764,name:"Reality"},{id:10765,name:"Sci-Fi & Fantasy"},{id:10766,name:"Soap"},{id:10767,name:"Talk"},{id:10768,name:"War & Politics"},{id:37,name:"Western"}];function _(){var e=Object(n.useState)(""),t=Object(b.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)([]),i=Object(b.a)(a,2),j=i[0],d=i[1],u=Object(n.useState)([]),h=Object(b.a)(u,2),f=h[0],v=h[1],_=Object(n.useState)(),S=Object(b.a)(_,2),N=S[0],T=S[1],F=Object(n.useState)(),L=Object(b.a)(F,2),k=L[0],C=L[1],D=Object(n.useState)([]),E=Object(b.a)(D,2),I=E[0],B=E[1],M=Object(n.useState)(),R=Object(b.a)(M,2),A=R[0],H=R[1],G=function(){var e=Object(o.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),"/.netlify/functions/fetchMovies";try{fetch("/.netlify/functions/fetchMovies",{method:"POST",body:JSON.stringify({query:c})}).then((function(e){return e.json()})).then((function(e){return e.data.filter((function(e){return e.poster_path}))})).then((function(e){d(e),v(e)}))}catch(n){console.error(n)}case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e="High-Low"===N?Object(l.a)(f).sort((function(e,t){return t.vote_average-e.vote_average})):"Low-High"===N?Object(l.a)(f).sort((function(e,t){return e.vote_average-t.vote_average})):"NewestFirst"===N?Object(l.a)(f).sort((function(e,t){return new Date(t.release_date||t.first_air_date)-new Date(e.release_date||e.first_air_date)})):"OldestFirst"===N?Object(l.a)(f).sort((function(e,t){return new Date(e.release_date||e.first_air_date)-new Date(t.release_date||t.first_air_date)})):"Title"===N?Object(l.a)(f).sort((function(e,t){return(e.title||e.name).localeCompare(t.title||t.name)})):Object(l.a)(f);v(e)}),[N]),Object(n.useEffect)((function(){var e="movies"===k?Object(l.a)(j).filter((function(e){return"movie"===e.media_type})):"tvShows"===k?Object(l.a)(j).filter((function(e){return"tv"===e.media_type})):Object(l.a)(j),t=A?Object(l.a)(e).filter((function(e){return e.genre_ids.includes(parseInt(A))})):Object(l.a)(e);v(t)}),[k,A]),Object(n.useEffect)((function(){var e=[];j.map((function(t){return e=e.concat(t.genre_ids)}));var t=w.filter((function(t){return e.includes(t.id)}));B(t)}),[f]),Object(O.jsxs)("div",{className:"container",children:[Object(O.jsx)(y,{}),Object(O.jsx)(m,{children:Object(O.jsxs)(m.Form,{onSubmit:G,children:[Object(O.jsx)(m.Input,{type:"text",name:"query",placeholder:"Search for a movie or tv show",value:c,onChange:function(e){return r(e.target.value)}}),Object(O.jsx)(m.Button,{type:"submit",children:"Search"})]})}),Object(O.jsxs)(x,{children:[Object(O.jsxs)(x.Form,{children:[Object(O.jsx)(x.Label,{children:"Sort By:"}),Object(O.jsxs)(x.Select,{id:"sortBy",onChange:function(e){return T(e.target.value)},children:[Object(O.jsx)("option",{value:"",children:"---"}),Object(O.jsx)("option",{value:"High-Low",children:"High-Low"}),Object(O.jsx)("option",{value:"Low-High",children:"Low-High"}),Object(O.jsx)("option",{value:"Title",children:"Title"}),Object(O.jsx)("option",{value:"NewestFirst",children:"Newest first"}),Object(O.jsx)("option",{value:"OldestFirst",children:"Oldest first"})]})]}),Object(O.jsxs)(x.Form,{children:[Object(O.jsx)(x.Label,{children:"Type:"}),Object(O.jsxs)(x.Select,{id:"filterByType",onChange:function(e){return C(e.target.value)},children:[Object(O.jsx)("option",{value:"",children:"---"}),Object(O.jsx)("option",{value:"movies",children:"Movies"}),Object(O.jsx)("option",{value:"tvShows",children:"TV Shows"})]})]}),Object(O.jsxs)(x.Form,{children:[Object(O.jsx)(x.Label,{children:"Genre:"}),Object(O.jsxs)(x.Select,{id:"filterByGenre",onChange:function(e){return H(e.target.value)},children:[Object(O.jsx)("option",{value:"",children:"---"}),I.map((function(e){return Object(O.jsx)("option",{value:e.id,children:e.name})}))]})]})]}),Object(O.jsx)(p,{children:f.map((function(e){return Object(O.jsx)(g,{movie:e},e.id)}))})]})}var S=function(){return Object(O.jsx)(_,{})};i.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(S,{})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.37e7bac2.chunk.js.map