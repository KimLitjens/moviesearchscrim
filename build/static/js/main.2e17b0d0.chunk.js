(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{20:function(e,t,c){},37:function(e,t,c){"use strict";c.r(t);var n=c(2),r=c.n(n),a=c(8),i=c.n(a),l=(c(20),c(5)),s=c(11),j=c.n(s),o=c(12),d=c(6),b=c(1),u=c(3),O=c(0);function h(e){var t=e.children,c=Object(u.a)(e,["children"]);return Object(O.jsx)("div",Object(b.a)(Object(b.a)({},c),{},{children:t}))}function m(e){var t=e.children,c=Object(u.a)(e,["children"]);return Object(O.jsx)("div",Object(b.a)(Object(b.a)({},c),{},{className:"mb-5 text-secondary",children:t}))}function f(e){var t=e.children,c=Object(u.a)(e,["children"]);return Object(O.jsx)("div",Object(b.a)(Object(b.a)({},c),{},{className:"flex flex-col lg:flex-row justify-center",children:t}))}h.Title=function(e){var t=e.children,c=Object(u.a)(e,["children"]);return Object(O.jsx)("h1",Object(b.a)(Object(b.a)({},c),{},{className:"text-center mb-4",children:t}))},m.Form=function(e){var t=e.children,c=Object(u.a)(e,["children"]);return Object(O.jsx)("form",Object(b.a)(Object(b.a)({},c),{},{className:"mb-5 sm:grid grid-cols-4",children:t}))},m.Button=function(e){var t=e.children,c=Object(u.a)(e,["children"]);return Object(O.jsx)("button",Object(b.a)(Object(b.a)({},c),{},{className:"bg-primary text-2xl px-8 py-4 rounded-full sm:ml-2 hover:opacity-75 ",children:t}))},m.Input=function(e){var t=e.children,c=Object(u.a)(e,["children"]);return Object(O.jsx)("input",Object(b.a)(Object(b.a)({},c),{},{className:"text-2xl leading-10 mb-4 border rounded-3xl px-8 py-2 mr-2.5 sm:col-span-3 sm:mb-0",children:t}))},f.Label=function(e){var t=e.children,c=Object(u.a)(e,["children"]);return Object(O.jsx)("h3",Object(b.a)(Object(b.a)({},c),{},{className:"uppercase mb-1 mr-1",children:t}))},f.Form=function(e){var t=e.children,c=Object(u.a)(e,["children"]);return Object(O.jsx)("form",Object(b.a)(Object(b.a)({},c),{},{className:"flex",children:t}))},f.Select=function(e){var t=e.children,c=Object(u.a)(e,["children"]);return Object(O.jsx)("select",Object(b.a)(Object(b.a)({},c),{},{className:"text-secondary leading-10 border rounded-3xl mb-4 px-8 py-2 mr-2.5",children:t}))};var x=c(13);function v(e){var t=e.children,c=Object(u.a)(e,["children"]);return Object(O.jsx)("div",Object(b.a)(Object(b.a)({},c),{},{className:"flex flex-col px-16 py-8 rounded-xl shadow-2xl mb-8 mr-8 bg-grey text-primary",children:t}))}function p(e){var t=e.children,c=Object(u.a)(e,["children"]);return Object(O.jsx)("div",Object(b.a)(Object(b.a)({},c),{},{className:"grid grid-flow-rows sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-16",children:t}))}function y(e){var t=e.children,c=Object(u.a)(e,["children"]);return Object(O.jsx)("p",Object(b.a)(Object(b.a)({},c),{},{className:"text-2xl",children:t}))}function g(){return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(h.Title,{children:"My Movie Search"})})}function w(e){var t=e.movie,c="tv"===t.media_type?"tv":"movie",r=Object(n.useState)([]),a=Object(d.a)(r,2),l=a[0],s=a[1],j=Object(n.useState)(!1),o=Object(d.a)(j,2),b=o[0],u=o[1];Object(n.useEffect)((function(){fetch("https://api.themoviedb.org/3/".concat(c,"/").concat(t.id,"/videos?api_key=").concat("","&language=en-US")).then((function(e){return e.json()})).then((function(e){return e.results.find((function(e){return"Trailer"===e.type}))})).then((function(e){s(e)}))}),[]);return Object(O.jsxs)(v,{children:[Object(O.jsx)(v.Link,{href:"https://www.themoviedb.org/".concat(c,"/").concat(t.id),target:"_blank",children:Object(O.jsx)(v.Image,{src:"https://image.tmdb.org/t/p/w185_and_h278_bestv2/".concat(t.poster_path),alt:t.title+" poster"})}),Object(O.jsx)(v.Title,{children:t.title||t.name}),Object(O.jsx)(v.ReleaseDate,{children:Object(O.jsxs)("small",{children:["RELEASE DATE: ",t.release_date||t.first_air_date]})}),Object(O.jsx)(v.Rating,{children:Object(O.jsxs)("small",{children:["RATING: ",t.vote_average]})}),Object(O.jsx)(v.Overview,{children:t.overview}),l?Object(O.jsx)(v.Trailer,{onClick:function(){return u(!0)},children:"Trailer"}):null,b?i.a.createPortal(Object(O.jsx)(v.Overlay,{onClick:function(){return u(!1)},children:Object(O.jsx)(v.Container,{children:Object(O.jsx)(v.Youtube,{videoId:l.key,opts:{height:"390",width:"640",playerVars:{autoplay:1}}})})}),document.body):null]})}v.Title=function(e){var t=e.children,c=Object(u.a)(e,["children"]);return Object(O.jsx)("h1",Object(b.a)(Object(b.a)({},c),{},{className:"my-4 -mx-14 text-white text-center",children:t}))},v.Image=function(e){e.children;var t=Object(u.a)(e,["children"]);return Object(O.jsx)("img",Object(b.a)(Object(b.a)({},t),{},{className:"mx-auto my-0"}))},v.Link=function(e){var t=e.children,c=Object(u.a)(e,["children"]);return Object(O.jsx)("a",Object(b.a)(Object(b.a)({},c),{},{children:t}))},v.ReleaseDate=function(e){var t=e.children,c=Object(u.a)(e,["children"]);return Object(O.jsx)("p",Object(b.a)(Object(b.a)({},c),{},{className:" text-center",children:t}))},v.Rating=function(e){var t=e.children,c=Object(u.a)(e,["children"]);return Object(O.jsx)("p",Object(b.a)(Object(b.a)({},c),{},{className:" text-center",children:t}))},v.Overview=function(e){var t=e.children,c=Object(u.a)(e,["children"]);return Object(O.jsx)("p",Object(b.a)(Object(b.a)({},c),{},{className:"text-white text-center my-8",children:t}))},v.Trailer=function(e){var t=e.children,c=Object(u.a)(e,["children"]);return Object(O.jsx)("button",Object(b.a)(Object(b.a)({},c),{},{className:" bg-primary text-white mt-20 rounded-full py-4 text-3xl ",children:t}))},v.Overlay=function(e){var t=e.children,c=Object(u.a)(e,["children"]);return Object(O.jsx)("div",Object(b.a)(Object(b.a)({},c),{},{className:"fixed inset-0 bg-secondary bg-opacity-80 z-50 h-screen",children:t}))},v.Youtube=function(e){e.children;var t=Object(u.a)(e,["children"]);return Object(O.jsx)(x.a,Object(b.a)(Object(b.a)({},t),{},{className:" m-auto z-50"}))},v.Container=function(e){var t=e.children,c=Object(u.a)(e,["children"]);return Object(O.jsx)("container",Object(b.a)(Object(b.a)({},c),{},{className:"flex h-screen justify-center items-center",children:t}))};var _=[{id:10759,name:"Action & Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:10762,name:"Kids"},{id:9648,name:"Mystery"},{id:10763,name:"News"},{id:10764,name:"Reality"},{id:10765,name:"Sci-Fi & Fantasy"},{id:10766,name:"Soap"},{id:10767,name:"Talk"},{id:10768,name:"War & Politics"},{id:37,name:"Western"}];function N(){var e=Object(n.useState)(""),t=Object(d.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)([]),i=Object(d.a)(a,2),s=i[0],b=i[1],u=Object(n.useState)([]),h=Object(d.a)(u,2),x=h[0],v=h[1],N=Object(n.useState)(),S=Object(d.a)(N,2),T=S[0],I=S[1],F=Object(n.useState)(),B=Object(d.a)(F,2),L=B[0],D=B[1],E=Object(n.useState)([]),k=Object(d.a)(E,2),C=k[0],M=k[1],A=Object(n.useState)(),R=Object(d.a)(A,2),H=R[0],G=R[1],P=function(){var e=Object(o.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),"/.netlify/functions/fetchMovies";try{fetch("/.netlify/functions/fetchMovies",{method:"POST",body:JSON.stringify({query:c})}).then((function(e){return e.json()})).then((function(e){return e.data.filter((function(e){return e.poster_path}))})).then((function(e){b(e),v(e)}))}catch(n){console.error(n)}document.getElementById("filterByType").selectedIndex=0,document.getElementById("sortBy").selectedIndex=0,document.getElementById("filterByGenre").selectedIndex=0;case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e="High-Low"===T?Object(l.a)(x).sort((function(e,t){return t.vote_average-e.vote_average})):"Low-High"===T?Object(l.a)(x).sort((function(e,t){return e.vote_average-t.vote_average})):"NewestFirst"===T?Object(l.a)(x).sort((function(e,t){return new Date(t.release_date||t.first_air_date)-new Date(e.release_date||e.first_air_date)})):"OldestFirst"===T?Object(l.a)(x).sort((function(e,t){return new Date(e.release_date||e.first_air_date)-new Date(t.release_date||t.first_air_date)})):"Title"===T?Object(l.a)(x).sort((function(e,t){return(e.title||e.name).localeCompare(t.title||t.name)})):Object(l.a)(x);v(e)}),[T]),Object(n.useEffect)((function(){var e="movies"===L?Object(l.a)(s).filter((function(e){return"movie"===e.media_type})):"tvShows"===L?Object(l.a)(s).filter((function(e){return"tv"===e.media_type})):Object(l.a)(s),t=H?Object(l.a)(e).filter((function(e){return e.genre_ids.includes(parseInt(H))})):Object(l.a)(e);v(t)}),[L,H]),Object(n.useEffect)((function(){var e=[];s.map((function(t){return e=e.concat(t.genre_ids)}));var t=_.filter((function(t){return e.includes(t.id)}));M(t)}),[x]),Object(O.jsxs)("div",{className:"container",children:[Object(O.jsx)(g,{}),Object(O.jsx)(m,{children:Object(O.jsxs)(m.Form,{onSubmit:P,children:[Object(O.jsx)(m.Input,{type:"text",name:"query",placeholder:"Search for a movie or tv show",value:c,onChange:function(e){return r(e.target.value)}}),Object(O.jsx)(m.Button,{type:"submit",children:"Search"})]})}),Object(O.jsxs)(f,{children:[Object(O.jsxs)(f.Form,{children:[Object(O.jsx)(f.Label,{children:"Sort By:"}),Object(O.jsxs)(f.Select,{id:"sortBy",onChange:function(e){return I(e.target.value)},children:[Object(O.jsx)("option",{value:"",children:"---"}),Object(O.jsx)("option",{value:"High-Low",children:"High-Low"}),Object(O.jsx)("option",{value:"Low-High",children:"Low-High"}),Object(O.jsx)("option",{value:"Title",children:"Title"}),Object(O.jsx)("option",{value:"NewestFirst",children:"Newest first"}),Object(O.jsx)("option",{value:"OldestFirst",children:"Oldest first"})]})]}),Object(O.jsxs)(f.Form,{children:[Object(O.jsx)(f.Label,{children:"Type:"}),Object(O.jsxs)(f.Select,{id:"filterByType",onChange:function(e){return D(e.target.value)},children:[Object(O.jsx)("option",{value:"",children:"---"}),Object(O.jsx)("option",{value:"movies",children:"Movies"}),Object(O.jsx)("option",{value:"tvShows",children:"TV Shows"})]})]}),Object(O.jsxs)(f.Form,{children:[Object(O.jsx)(f.Label,{children:"Genre:"}),Object(O.jsxs)(f.Select,{id:"filterByGenre",onChange:function(e){return G(e.target.value)},children:[Object(O.jsx)("option",{value:"",children:"---"}),C.map((function(e){return Object(O.jsx)("option",{value:e.id,children:e.name})}))]})]})]}),Object(O.jsx)(p,{children:x.map((function(e){return Object(O.jsx)(w,{movie:e},e.id)}))}),x.length>0?Object(O.jsx)(y,{children:"*This product uses the TMDb API but is not endorsed or certified by TMDb."}):null]})}var S=function(){return Object(O.jsx)(N,{})};i.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(S,{})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.2e17b0d0.chunk.js.map